@model IEnumerable<GiftRegistry.Models.FriendListItem>

@{
    ViewBag.Title = "Friends";
}

<h2 class="mt-4">Your Friends</h2>

<div class="mt-3 row justify-content-md-start">
    <div class="col-md-auto pl-0 mr-1">
        @using (Html.BeginForm("Index", "Friend", FormMethod.Get))
        {
            @Html.TextBox("search", null, new { @id = "searchField", @onblur = "return check(this);", @placeholder = "Search..." }) <input class="btn btn-gray-light search-button mr-1 ml-0" type="submit" value="" />
        }
    </div>

    <div class="col-md-auto px-0 mr-1 ml-0">
        @using (Html.BeginForm("Index", "Friend", FormMethod.Get))
        {
            <button type="submit" id="clearButton" class="btn btn-gray-dark" disabled>Clear Search</button>
        }
    </div>

    <div class="col-md-auto px-0 mx-2">
        
        @Html.ActionLink("Add Friend", "Index", "Person", null, new { @class = "btn btn-gold" })

    </div>
</div>


<hr />

@if (Model is null || Model.Count() == 0)
{
    <p class="my-4">We couldn't find any friends at this time. Try adjusting your search results or adding new friends!</p>
}
else
{
    <div id="friendList" class="row row-gallery row-cols-1 row-cols-md-3 g-4 mb-2">

        @foreach (var item in Model)
        {
            @Html.Partial("_FriendListItemPartial", item)
        }

    </div>
}

<script>

    $(document).ready(function () {
        if (document.getElementById("searchField").value != "") {
            document.getElementById("clearButton").disabled = false;
        }
        else {
            document.getElementById("clearButton").disabled = true;
        }
    });

    function check(obj) {
        if (obj.value.trim() != "") {
            document.getElementById("clearButton").disabled = false;
        }
        else {
            document.getElementById("clearButton").disabled = true;
        }
    }

</script>

<style>

    input[type=text] {
        float: left;
        padding: 6px 6px 6px 10px;
        border: 1px solid rgba(143, 143, 143, .5);
        border-radius: 2px;
        margin-right: 8px;
        font-size: 17px;
    }

    .search-button {
        background-image: url("../../Images/SearchIcon.png");
        background-size: 20px 20px;
        background-repeat: no-repeat;
        background-position: center;
        padding-left: 20px;
    }

    .button-disabled {
        cursor: text;
    }
</style>
